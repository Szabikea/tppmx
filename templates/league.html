{% extends "base.html" %}

{% block title %}{{ league_name }} - Tabella és Csapatok{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-0 text-white">{{ league_name }}</h2>
            <p class="text-muted">Tabella és Csapatok</p>
        </div>
        <a href="{{ url_for('main.upcoming_matches', league_filter=league_name|lower|replace(' ', '-')) }}"
            class="btn btn-outline-info">
            <i class="bi bi-calendar-event"></i> Következő Meccsek
        </a>
    </div>

    <div class="row">
        <!-- Tabella -->
        <div class="col-lg-8">
            <div class="glass-card mb-4">
                <h4 class="card-title mb-4"><i class="bi bi-table text-accent"></i> Bajnoki Tabella</h4>

                {% if standings %}
                <div class="table-responsive">
                    <table class="table table-dark table-hover align-middle">
                        <thead>
                            <tr class="text-muted">
                                <th style="width: 50px;">#</th>
                                <th>Csapat</th>
                                <th class="text-center">M</th>
                                <th class="text-center d-none d-sm-table-cell">Gy</th>
                                <th class="text-center d-none d-sm-table-cell">D</th>
                                <th class="text-center d-none d-sm-table-cell">V</th>
                                <th class="text-center d-none d-md-table-cell">Gólok</th>
                                <th class="text-center fw-bold text-white">Pont</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for team in standings %}
                            <tr>
                                <td>{{ loop.index }}.</td>
                                <td>
                                    <a href="{{ url_for('main.team_details', team_name=team.name) }}"
                                        class="text-white text-decoration-none fw-bold d-block">
                                        {{ team.name }}
                                    </a>
                                </td>
                                <td class="text-center">{{ team.p }}</td>
                                <td class="text-center d-none d-sm-table-cell">{{ team.w }}</td>
                                <td class="text-center d-none d-sm-table-cell">{{ team.d }}</td>
                                <td class="text-center d-none d-sm-table-cell">{{ team.l }}</td>
                                <td class="text-center d-none d-md-table-cell text-muted small">
                                    {{ team.gf }}:{{ team.ga }}
                                </td>
                                <td class="text-center fw-bold text-accent fs-5">{{ team.pts }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="alert alert-info">
                    <i class="bi bi-info-circle"></i> Nincs elérhető adat ehhez a ligához. Próbálj frissíteni a
                    főoldalon!
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Info Panel -->
        <div class="col-lg-4">
            <!-- Érdekességek -->
            <div class="glass-card mb-4">
                <h5 class="card-title text-warning"><i class="bi bi-lightbulb"></i> Érdekességek</h5>
                <ul class="list-unstyled text-muted small">
                    <li class="mb-3">
                        <i class="bi bi-caret-right-fill text-warning"></i>
                        A {{ league_name }} az egyik legnézettebb bajnokság. Kövesd a csapatokat a részletes
                        statisztikákért!
                    </li>
                    <li class="mb-3">
                        <i class="bi bi-caret-right-fill text-warning"></i>
                        Kattints bármelyik csapat nevére a tabellán, hogy lásd a formájukat és az eddigi eredményeiket.
                    </li>
                </ul>
            </div>

            <!-- Hírek (Mock) -->
            <div class="glass-card">
                <h5 class="card-title text-info"><i class="bi bi-newspaper"></i> Friss Hírek</h5>
                <div class="news-item mb-3 pb-3 border-bottom border-secondary">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                        <span class="badge bg-secondary">Átigazolás</span>
                        <small class="text-muted">2 órája</small>
                    </div>
                    <strong>Izgalmas végjáték várható a szezonban!</strong>
                    <p class="small text-muted mb-0">Az élmezőny szoros küzdelmet folytat a bajnoki címért.</p>
                </div>
                <div class="news-item">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                        <span class="badge bg-danger">Sérülés</span>
                        <small class="text-muted">Tegnap</small>
                    </div>
                    <strong>Kulcsjátékosok térhetnek vissza</strong>
                    <p class="small text-muted mb-0">A következő fordulóban több sérült játékos is pályára léphet.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}